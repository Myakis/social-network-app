/*! For license information please see 354.6dc5f88b.chunk.js.LICENSE.txt */
(self.webpackChunk_01_educational_project=self.webpackChunk_01_educational_project||[]).push([[354],{9354:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return w}});var n=a(364),t=a(7781),i=a(2823),r=a(2932),o=a(885),l=a(2791),d=a(5078),c=a(8105),u=a(7508),g=a(2261),m=a(4942),_=a(1694),f=a.n(_),p=a(3504),h=a(612),v=a(7593),j=a(184),x=l.memo((function(e){var s=(0,n.I0)();return(0,j.jsx)("div",{className:v.Z.item,onClick:function(){s((0,i.gj)(e.id)),s(i.E4.lastDialogs(e.id)),e.setSelected(e.id)},children:(0,j.jsxs)("div",{className:f()((0,m.Z)({},v.Z.active,e.id===e.selected),v.Z.body),children:[(0,j.jsxs)("div",{className:v.Z.avatar,children:[(0,j.jsx)(p.OL,{to:"/profile/"+e.id,children:(0,j.jsx)("img",{src:e.photo?e.photo:h,alt:"avatar"})}),e.newMessage>0&&(0,j.jsx)("span",{children:e.newMessage})]}),(0,j.jsx)("div",{className:v.Z.userInfo,children:(0,j.jsx)("div",{className:v.Z.name,children:e.name})})]})})})),M=function(e){var s=(0,g.C)((function(e){return e.auth.userId}));return(0,j.jsx)("div",{className:"".concat(v.Z.message," ").concat(s===e.id?v.Z.me:""),children:e.message})},Z=l.memo((function(e){var s=(0,g.C)((function(e){return e.dialog.pendingUsers})),a=(0,g.C)((function(e){return e.dialog.pendingMessage})),t=(0,g.C)((function(e){return e.dialog.messages})),r=(0,g.C)((function(e){return e.dialog.firstUser})),d=(0,g.C)((function(e){return e.dialog.users})),m=(0,l.useState)(!0),_=(0,o.Z)(m,2),f=_[0],p=_[1],h=(0,l.useState)(null),Z=(0,o.Z)(h,2),y=Z[0],N=Z[1],w=(0,c.YD)({rootMargin:"10px",threshold:0}),C=w.ref,S=w.inView,I=(0,n.I0)(),k=(0,l.useRef)(null);(0,l.useEffect)((function(){I((0,i.AB)()),r&&N(r)}),[]),(0,l.useEffect)((function(){var e,s;S&&(f?(null===(e=k.current)||void 0===e||e.scrollIntoView(),N(r),p(!1)):null===(s=k.current)||void 0===s||s.scrollIntoView({behavior:"smooth"}))}),[t]);return s?(0,j.jsx)(u.Z,{}):(0,j.jsxs)("div",{className:v.Z.dialogsWrapper,children:[(0,j.jsx)("div",{className:v.Z.dialogs,children:d.map((function(e){return(0,j.jsx)(x,{selected:y,setSelected:N,name:e.userName,id:e.id,photo:e.photos.small,newMessage:e.newMessagesCount},e.id)}))}),a&&(0,j.jsx)(u.Z,{}),(0,j.jsx)("div",{className:v.Z.dialogWindow,children:(0,j.jsxs)("div",{className:v.Z.dialogWindow,children:[(0,j.jsxs)("div",{className:v.Z.list,children:[0===t.length&&(0,j.jsx)("div",{className:v.Z.chatEmpty,children:(0,j.jsx)("div",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"})}),(0,j.jsxs)("div",{children:[t.map((function(e){return(0,j.jsx)(M,{id:e.senderId,message:e.body},e.id)})),(0,j.jsx)("div",{ref:k,children:(0,j.jsx)("div",{ref:C})})]})]}),y&&(0,j.jsx)(b,{addMessage:function(e){},id:y})]})})]})})),b=function(e){var s=e.id,a=(0,n.I0)();return(0,j.jsx)(d.l0,{onSubmit:function(e,n){a((0,i.n3)(s,e.message)),n.reset()},render:function(e){var s=e.handleSubmit;return(0,j.jsxs)("form",{onSubmit:s,className:v.Z.form,children:[(0,j.jsx)(d.gN,{component:"input",name:"message",className:v.Z.input,type:"text",autoComplete:"off"}),(0,j.jsx)("button",{type:"submit",className:v.Z.button,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})}})},y=Z,N=i.E4.addMessage,w=(0,t.qC)((0,n.$j)((function(e){return{state:e}}),{addMessage:N}),r.D)(y)},1694:function(e,s){var a;!function(){"use strict";var n={}.hasOwnProperty;function t(){for(var e=[],s=0;s<arguments.length;s++){var a=arguments[s];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)){if(a.length){var r=t.apply(null,a);r&&e.push(r)}}else if("object"===i)if(a.toString===Object.prototype.toString)for(var o in a)n.call(a,o)&&a[o]&&e.push(o);else e.push(a.toString())}}return e.join(" ")}e.exports?(t.default=t,e.exports=t):void 0===(a=function(){return t}.apply(s,[]))||(e.exports=a)}()},7593:function(e,s){"use strict";s.Z={dialogsWrapper:"Messages_dialogsWrapper__YwypJ",dialogWindow:"Messages_dialogWindow__1gblw",dialogs:"Messages_dialogs__iZr+M",user:"Messages_user__PCZbo",name:"Messages_name__SmhmX",avatar:"Messages_avatar__W6z6z",last__message:"Messages_last__message__CPj+c",item:"Messages_item__x7KDk",list:"Messages_list__k7V2X",form:"Messages_form__YxykZ",input:"Messages_input__pIkD+",body:"Messages_body__+rpBH",button:"Messages_button__uH0ZZ",message:"Messages_message__irOQy",me:"Messages_me__Y0DQm",active:"Messages_active__FP9nJ",noMessage:"Messages_noMessage__vIYFY",chatEmpty:"Messages_chatEmpty__MWF-y"}}}]);
//# sourceMappingURL=354.6dc5f88b.chunk.js.map